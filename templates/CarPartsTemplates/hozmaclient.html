{% extends 'CarPartsTemplates/hozmabase.html' %} <!-- إذا كنت تستخدم نظام القوالب -->

{% block content %}
<div class="col-lg-9">
    <div class="card mb-4 hover-scale">
        <div class="card-header d-flex justify-content-between align-items-center">
            <h5 class="mb-0">إدارة العملاء</h5>
            <div>
                <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#addCustomerModal">
                    <i class="fas fa-plus me-1"></i>إضافة عميل جديد
                </button>
                <button class="btn btn-success btn-sm ms-2" id="exportCustomersBtn">
                    <i class="fas fa-file-export me-1"></i>تصدير البيانات
                </button>
            </div>
        </div>
        <div class="card-body">
            <div class="row mb-4">
                <div class="col-md-6">
                    <div class="input-group">
                        <input type="text" class="form-control" placeholder="بحث عن العملاء..." id="customerSearch">
                        <button class="btn btn-outline-secondary" type="button" id="searchCustomerBtn">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="d-flex justify-content-end">
                        <div class="dropdown me-2">
                            <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown">
                                <i class="fas fa-filter me-1"></i>تصفية حسب
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#" data-filter="all">الكل</a></li>
                                <li><a class="dropdown-item" href="#" data-filter="active">العملاء النشطين</a></li>
                                <li><a class="dropdown-item" href="#" data-filter="inactive">العملاء غير النشطين</a></li>
                                <li><a class="dropdown-item" href="#" data-filter="vip">العملاء المميزين</a></li>
                                <li><a class="dropdown-item" href="#" data-filter="wholesale">عملاء الجملة</a></li>
                            </ul>
                        </div>
                        <div class="dropdown">
                            <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="sortDropdown" data-bs-toggle="dropdown">
                                <i class="fas fa-sort me-1"></i>ترتيب حسب
                            </button>
                            <ul class="dropdown-menu dropdown-menu-end">
                                <li><a class="dropdown-item" href="#" data-sort="recent">الأحدث</a></li>
                                <li><a class="dropdown-item" href="#" data-sort="oldest">الأقدم</a></li>
                                <li><a class="dropdown-item" href="#" data-sort="name-asc">الاسم (أ-ي)</a></li>
                                <li><a class="dropdown-item" href="#" data-sort="name-desc">الاسم (ي-أ)</a></li>
                                <li><a class="dropdown-item" href="#" data-sort="orders-asc">عدد الطلبات (قليل-كثير)</a></li>
                                <li><a class="dropdown-item" href="#" data-sort="orders-desc">عدد الطلبات (كثير-قليل)</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div class="table-responsive">
                <table class="table table-hover" id="customersTable">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>العميل</th>
                            <th>معلومات الاتصال</th>
                            <th>عدد الطلبات</th>
                            <th>إجمالي المشتريات</th>
                            <th>الحالة</th>
                            <th>النوع</th>
                            <th>آخر عملية</th>
                            <th>الإجراءات</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- سيتم ملء هذا الجدول بالبيانات من قاعدة البيانات -->
                        <tr>
                            <td>1</td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <img src="/static/HOZMA_FRONT/images/placeholder.png" class="rounded-circle me-3" width="40" height="40" alt="صورة العميل">
                                    <div>
                                        <h6 class="mb-0">أحمد محمد</h6>
                                        <small class="text-muted">ID: CUS-1001</small>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div>
                                    <small><i class="fas fa-phone me-1"></i> 0501234567</small><br>
                                    <small><i class="fas fa-envelope me-1"></i> ahmed@example.com</small>
                                </div>
                            </td>
                            <td>15</td>
                            <td>5,250 ر.س</td>
                            <td><span class="badge bg-success">نشط</span></td>
                            <td><span class="badge bg-info">تجزئة</span></td>
                            <td>2023-10-15</td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary" data-bs-toggle="tooltip" title="عرض التفاصيل">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary" data-bs-toggle="tooltip" title="تعديل">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger" data-bs-toggle="tooltip" title="حذف">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <img src="/static/HOZMA_FRONT/images/placeholder.png" class="rounded-circle me-3" width="40" height="40" alt="صورة العميل">
                                    <div>
                                        <h6 class="mb-0">شركة الوفاق لقطع الغيار</h6>
                                        <small class="text-muted">ID: CUS-1002</small>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div>
                                    <small><i class="fas fa-phone me-1"></i> 0507654321</small><br>
                                    <small><i class="fas fa-envelope me-1"></i> info@alwafaq.com</small>
                                </div>
                            </td>
                            <td>42</td>
                            <td>28,750 ر.س</td>
                            <td><span class="badge bg-success">نشط</span></td>
                            <td><span class="badge bg-warning text-dark">جملة</span></td>
                            <td>2023-10-12</td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <img src="/static/HOZMA_FRONT/images/placeholder.png" class="rounded-circle me-3" width="40" height="40" alt="صورة العميل">
                                    <div>
                                        <h6 class="mb-0">خالد عبدالله</h6>
                                        <small class="text-muted">ID: CUS-1003</small>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div>
                                    <small><i class="fas fa-phone me-1"></i> 0501122334</small><br>
                                    <small><i class="fas fa-envelope me-1"></i> khalid@example.com</small>
                                </div>
                            </td>
                            <td>3</td>
                            <td>1,200 ر.س</td>
                            <td><span class="badge bg-secondary">غير نشط</span></td>
                            <td><span class="badge bg-info">تجزئة</span></td>
                            <td>2023-08-22</td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>
                                <div class="d-flex align-items-center">
                                    <img src="/static/HOZMA_FRONT/images/placeholder.png" class="rounded-circle me-3" width="40" height="40" alt="صورة العميل">
                                    <div>
                                        <h6 class="mb-0">محمد علي</h6>
                                        <small class="text-muted">ID: CUS-1004</small>
                                    </div>
                                </div>
                            </td>
                            <td>
                                <div>
                                    <small><i class="fas fa-phone me-1"></i> 0505566778</small><br>
                                    <small><i class="fas fa-envelope me-1"></i> mohammed@example.com</small>
                                </div>
                            </td>
                            <td>8</td>
                            <td>3,800 ر.س</td>
                            <td><span class="badge bg-success">نشط</span></td>
                            <td><span class="badge bg-primary">مميز</span></td>
                            <td>2023-10-14</td>
                            <td>
                                <button class="btn btn-sm btn-outline-primary">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-edit"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-danger">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <nav aria-label="Page navigation" class="mt-4">
                <ul class="pagination justify-content-center">
                    <li class="page-item disabled">
                        <a class="page-link" href="#" tabindex="-1">السابق</a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#">التالي</a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>

    <!-- Customer Stats Cards -->
    <div class="row mb-4">
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card stats-card primary hover-scale">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5 class="card-title">إجمالي العملاء</h5>
                            <h2 class="card-value">1,248</h2>
                            <p class="mb-0"><span class="text-success"><i class="fas fa-arrow-up me-1"></i> 12.5%</span> عن الشهر الماضي</p>
                        </div>
                        <i class="fas fa-users"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card stats-card success hover-scale">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5 class="card-title">العملاء النشطين</h5>
                            <h2 class="card-value">856</h2>
                            <p class="mb-0"><span class="text-success"><i class="fas fa-arrow-up me-1"></i> 8.3%</span> عن الشهر الماضي</p>
                        </div>
                        <i class="fas fa-user-check"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card stats-card warning hover-scale">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5 class="card-title">عملاء الجملة</h5>
                            <h2 class="card-value">42</h2>
                            <p class="mb-0"><span class="text-success"><i class="fas fa-arrow-up me-1"></i> 5.2%</span> عن الشهر الماضي</p>
                        </div>
                        <i class="fas fa-store-alt"></i>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-xl-3 col-md-6 mb-4">
            <div class="card stats-card info hover-scale">
                <div class="card-body">
                    <div class="d-flex justify-content-between">
                        <div>
                            <h5 class="card-title">العملاء المميزين</h5>
                            <h2 class="card-value">78</h2>
                            <p class="mb-0"><span class="text-success"><i class="fas fa-arrow-up me-1"></i> 3.7%</span> عن الشهر الماضي</p>
                        </div>
                        <i class="fas fa-crown"></i>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Details Modal -->
    <div class="modal fade" id="customerDetailsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">تفاصيل العميل</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4 text-center">
                            <img src="/static/HOZMA_FRONT/images/placeholder.png" class="img-thumbnail mb-3" width="150" alt="صورة العميل">
                            <h4>أحمد محمد</h4>
                            <p class="text-muted">ID: CUS-1001</p>
                            <div class="mb-3">
                                <span class="badge bg-success me-1">نشط</span>
                                <span class="badge bg-info">تجزئة</span>
                            </div>
                            <div class="d-flex justify-content-center">
                                <button class="btn btn-sm btn-outline-primary me-2">
                                    <i class="fas fa-envelope"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-success me-2">
                                    <i class="fas fa-phone"></i>
                                </button>
                                <button class="btn btn-sm btn-outline-secondary">
                                    <i class="fas fa-edit"></i>
                                </button>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0">معلومات أساسية</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-md-6">
                                            <p><strong>البريد الإلكتروني:</strong> ahmed@example.com</p>
                                            <p><strong>الهاتف:</strong> 0501234567</p>
                                            <p><strong>الجوال:</strong> 0501234567</p>
                                        </div>
                                        <div class="col-md-6">
                                            <p><strong>تاريخ التسجيل:</strong> 15/03/2022</p>
                                            <p><strong>آخر زيارة:</strong> 15/10/2023</p>
                                            <p><strong>آخر عملية:</strong> 15/10/2023</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="card mb-3">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0">العنوان</h6>
                                </div>
                                <div class="card-body">
                                    <p><strong>المدينة:</strong> الرياض</p>
                                    <p><strong>الحي:</strong> النخيل</p>
                                    <p><strong>الشارع:</strong> شارع الملك فهد</p>
                                    <p><strong>الرمز البريدي:</strong> 12345</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt-3">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0">إحصائيات المشتريات</h6>
                                </div>
                                <div class="card-body">
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>عدد الطلبات:</span>
                                        <strong>15</strong>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>إجمالي المشتريات:</span>
                                        <strong>5,250 ر.س</strong>
                                    </div>
                                    <div class="d-flex justify-content-between mb-2">
                                        <span>متوسط قيمة الطلب:</span>
                                        <strong>350 ر.س</strong>
                                    </div>
                                    <div class="d-flex justify-content-between">
                                        <span>آخر عملية:</span>
                                        <strong>15/10/2023</strong>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header bg-light">
                                    <h6 class="mb-0">تفضيلات الشراء</h6>
                                </div>
                                <div class="card-body">
                                    <div class="mb-3">
                                        <h6 class="small">فئات مفضلة:</h6>
                                        <div>
                                            <span class="badge bg-light text-dark me-1">قطع محرك</span>
                                            <span class="badge bg-light text-dark me-1">إطارات</span>
                                            <span class="badge bg-light text-dark">زيت محرك</span>
                                        </div>
                                    </div>
                                    <div>
                                        <h6 class="small">العلامات التجارية المفضلة:</h6>
                                        <div>
                                            <span class="badge bg-light text-dark me-1">تويوتا</span>
                                            <span class="badge bg-light text-dark">نيسان</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
                    <button type="button" class="btn btn-primary">حفظ التغييرات</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Customer Modal -->
    <div class="modal fade" id="addCustomerModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">إضافة عميل جديد</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addCustomerForm">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="customerName" class="form-label">اسم العميل</label>
                                    <input type="text" class="form-control" id="customerName" required>
                                </div>
                                <div class="mb-3">
                                    <label for="customerEmail" class="form-label">البريد الإلكتروني</label>
                                    <input type="email" class="form-control" id="customerEmail">
                                </div>
                                <div class="mb-3">
                                    <label for="customerPhone" class="form-label">رقم الجوال</label>
                                    <input type="tel" class="form-control" id="customerPhone" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="customerType" class="form-label">نوع العميل</label>
                                    <select class="form-select" id="customerType">
                                        <option value="retail">تجزئة</option>
                                        <option value="wholesale">جملة</option>
                                        <option value="vip">مميز</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="customerStatus" class="form-label">الحالة</label>
                                    <select class="form-select" id="customerStatus">
                                        <option value="active">نشط</option>
                                        <option value="inactive">غير نشط</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="customerDiscount" class="form-label">خصم خاص (%)</label>
                                    <input type="number" class="form-control" id="customerDiscount" min="0" max="100" value="0">
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="customerCity" class="form-label">المدينة</label>
                                    <input type="text" class="form-control" id="customerCity">
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="customerDistrict" class="form-label">الحي</label>
                                    <input type="text" class="form-control" id="customerDistrict">
                                </div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="customerAddress" class="form-label">العنوان التفصيلي</label>
                            <textarea class="form-control" id="customerAddress" rows="2"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="customerNotes" class="form-label">ملاحظات</label>
                            <textarea class="form-control" id="customerNotes" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="submit" class="btn btn-primary" form="addCustomerForm">حفظ العميل</button>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}